[TOC]

# 算法和数据结构基础知识

什么是数据结构？什么是算法？

- 就是一个能组在一起的集合对象。比如数组 链表 队列等。算法：就是解决问题的。

数据结构相关书籍：

（1）严蔚敏版 数据结构与算法
（2）大话数据结构

算法相关书籍：

（1）基础级：刘汝佳 算法竞赛入门经典（两本，还有一个是习题）
（2）进阶级：刘汝佳黑书 算法导论；非常难，非算法行业慎入

刷题网站：

（1）力扣:https://leetcode-cn.com/
（2）POJ or HDU

算法的五大特性：

- 有穷性、
- 确定性、
- 可行性、
- 有输入、
- 有输出

设计原则：正确性、可读性、健壮性 

bug：写出代码很少有bug，而且系统比较稳定

高效率与低存储: 内存+CPU 堆栈内存OOM

内存占用最小，CPU占用最小，运算速度最快。

评价算法的两个重要指标：

- 时间复杂度:运行一个程序所花费的时间。O()
- 空间复杂度：运行程序所需要的内存  OOM

# 时间复杂度

1. 时间复杂度计算的意义:怎么测试接口的性能的？压测，冒烟。要依赖测试环境吧，流程很长，搞的规模或者数据不准确。排序算法： 1 2 3  / 3 2 1. 你应该自己用代码分析。也就是时间复杂度
   
2. 时间复杂度表示方法：大O表示法。O(n),O(nlogn);O(1),O(n),O(nlogn),O(n^2),O(n+1),O(logn),O(n!)
3. 时间复杂度如何来分析
   （1）找for while 递归。而且要找循环量最大的那一段
   （2）同级循环怎么计算

4. 几种常见的时间复杂度分析：指的是某一段代码。
   计算时间复杂度 往往是计算比较大的 而且是不确定的数，如果已经确定了，那么就不用计算了，也是我们说的常量。

   - 常数：O(1) 1表示是常数，所有能确定的数字我们都用O（1），O(1000)=>o(1)
   - 对数：O(logn),O(nlogn)
   - 线性：O(n)
   - 线性对数：O(nlogn)
   - 平方：O(n^2)
   - N次方：O(n^n)

   我们怎么找时间复杂度：

   1. 找到有循环的地方，
   2. 找有网络请求（RPC，远程调用，分布式，数据库请求）的地方。

   就是测试时间：log打印，计算平均时间。

![image-20211203145456430](数据结构与算法.assets/image-20211203145456430.png)

​	几种常见的时间复杂度总结：

- 学了时间复杂度，那我们的目的就是要把代码写到最优，效率最高；
- O(1)>O(logn)>O(n)>O(nlogn)>O(n^2)>O(n^x)
- O(1)>O(logn)>O(n)>O(nlogn) 效果都是很好的。几乎优化的空间不是很大。
- 登录：判断用户名密码O(1)到数据库里查记录；分布式 缓存。
- 列表的接口：排序，冒泡排序；=>找更优秀的排序算法 快速排序，归并排序，堆排序。
- 优化的目标就是要往O（1）的方向接近。

5. 最坏情况，最好情况，平均情况时间复杂度；

# 空间复杂度

1. 空间复杂度分析的意义：找花了内存的地方。数据
2. 如何找出程序的空间复杂度：开了空间的地方， 比如 数组 链表，缓存对象，递归

# 数组

## 经典面试题

给你一个文件里面包含全国人民（14亿）的年龄数据（0~180），现在要你统计每一个年龄有多少人？
给定机器为 单台+2CPU+2G内存。不得使用现成的容器，比如map等。

生成14亿人的年龄数据：

```java
package com.liquor.demotest;

import java.io.*;
import java.util.Random;

/**
 * Project：demo-test
 * Date：2021/12/8
 * Time：10:05
 * Description：生成14亿人的年龄数据
 *
 * @author Liquor
 * @version 1.0.0
 */
public class Test {
    public static void main(String[] args) throws IOException {
        String fileName = "F:\\age1.txt";
        Random random = new Random();
        // 文件字节输出流
        FileOutputStream fileOutputStream = new FileOutputStream(fileName);
        OutputStreamWriter bufferedOutputStream = new OutputStreamWriter(fileOutputStream);
        // 缓冲输入流
        BufferedWriter bufferedWriter = new BufferedWriter(bufferedOutputStream);

        for (int i = 0; i < 1400000000; i++) {
            // nextInt()该函数会随机生成整数范围内的任意一个整数。整数范围内表示-2的31次方到2的31次方之间。
            int num = random.nextInt();
            // abs()取绝对值
            // % 180 即 算出年龄在0 - 179 岁的
            int age = Math.abs(num) % 180;
            // \r表示回到当前行的行首   \n表示换行符
            bufferedWriter.write(age + "\r\n");
        }
        // 数据是先写入缓冲区中，必须执行flush（）方法，才会放入文件里。
        bufferedWriter.flush();
        // close（）该函数内部其实包含flush（）方法。也可以直接调用close（）方法。
        bufferedWriter.close();
    }
}
```

计算每个年龄多少人：

```java
package com.liquor.demotest;

import java.io.BufferedReader;
import java.io.FileInputStream;
import java.io.InputStreamReader;

/**
 * @author yc
 */
public class AgeStas {

    public static void main(String[] args) throws Exception {
        String str;
        String fileName = "F:\\age1.txt";
        InputStreamReader isr = new InputStreamReader(new FileInputStream(fileName), "UTF8");

        long start = System.currentTimeMillis();
        BufferedReader br = new BufferedReader(isr);
        // int占32位的时候,最大可以赋值为:2147483647，也就是21亿多。
        int tot = 0;
        int[] data = new int[200];
        // 一行一行的读  时间复杂度为O(n)
        while ((str = br.readLine()) != null) {
            int age = Integer.valueOf(str);
            data[age]++;
            tot++;
        }
        //O(n) 14亿. 100万/秒 *1000 = 10亿 100~1000s之间 => 500s以下 60*8=480s
        System.out.println("总共的数据大小: " + tot);

        // 下标从0开始的
        for (int i = 0; i < 200; i++) {
            System.out.println(i + ":" + data[i]);
        }
        //144239ms => 144s
        System.out.println("计算花费的时间为:" + (System.currentTimeMillis() - start) + "ms");
    }
}
```

## 数组定义

​		所谓数组，是有序的元素序列。 若将有限个类型相同的变量的集合命名，那么这个名称为数组名。组成数组的各个变量称为数组的分量，也称为数组的元素，有时也称为下标变量。用于区分数组的各个元素的数字编号称为下标。数组是在程序设计中，为了处理方便， 把具有相同类型的若干元素按无序的形式组织起来的一种形式。这些无序排列的同类数据元素的集合称为数组。

​		数组是用于储存多个相同类型数据的集合。通常用Array表示，也称之为线性表。

## 数组特点

1. 数组是相同数据类型的元素的集合。
2. 数组中的各元素的存储是有先后顺序的，它们在内存中按照这个先后顺序连续存放在一起。内存地址
3. 数组元素用整个数组的名字和它自己在数组中的顺序位置来表示。例如，a[0]表示名字为a的数组中的第一个元素，a[1]代表数组a的第二个元素，以此类推。

4. 数组的表现形式：有一维数组、多维数组

5. 随机访问

   数组是连续的内存空间和相同类型的数据。正是因为这两个限制，它才有了一个非常重要的特性：随机访问。但有利就有弊，这两个限制也让数组的很多操作变得非常低效，比如要想在数组中删除、插入一个数据，为了保证连续性，就需要做大量的数据搬移工作。

6. ArrayList和数组：ArrayList本质就是数组，只是它被JDK封装了一层，使用者不需要考虑扩容等操作。而数组则需要你自己进行扩容操作。

   两者之间如何选用？

   - 不知道数据大小使用ArrayList。

   - 如果你知道数据的大小而且你又非常关注性能那就用数组。

   ```java
   package com.liquor.demotest;
   
   /**
    * Project：demo-test
    * Date：2021/12/8
    * Time：14:55
    * Description：
    *
    * @author Liquor
    * @version 1.0.0
    */
   public class ArrayTest {
       /**
        * 数组的长度
        */
       private int size;
   
       private int[] data;
   
       /**
        * 当前已经存的数据大小
        */
       private int index;
   
       /**
        * 数组初始化过程
        *
        * @param size
        */
       public ArrayTest(int size) {
           this.size = size;
           data = new int[size];
           index = 0;
       }
   
       public void print() {
           System.out.println("index " + index);
           for (int i = 0; i < size; i++) {
               System.out.println(data[i] + "");
           }
           System.out.println();
       }
   
       public void insert(int loc, int n) {
           if (index++ < size) {
               for (int i = size - 1; i > loc; i--) {
                   data[i] = data[i - 1];
               }
               data[loc] = n;
           }
           //扩容 会把size*2 0.75
       }
   
       public void delete(int loc) {
           for (int i = loc; i < size; i++) {
               if (i != size - 1) {
                   // 将后一个的值往前移
                   data[i] = data[i + 1];
               } else {
                   data[i] = 0;
               }
           }
           index--;
       }
   
       public void update(int loc, int n) {
           data[loc] = n;
       }
   
       public int get(int loc) {
           return data[loc];
       }
   }
   ```

## 数组缺点

- 插入和删除的效率慢，需要做大量的数据迁移工作，需要另外开辟新的连续的存储空间。
- 一旦超过数组的最大长度，则访问会报数组下标越界异常。

## java字符串

```java
String s1 = "ja";
String s2 = "va";
String s3 = "java";
String s4 = s1 + s2; //java 注意这个+号，java里面重载了+，其实调用了StringBuilder，会new对象。
System.out.println(s3 == s4);	//false
System.out.println(s3.equals(s4));	//true 只是比较值
```

